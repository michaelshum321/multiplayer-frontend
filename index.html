<html>
<head>
	<script type="text/javascript" src="index.js"></script>
	<script type="text/javascript">
	window.onload = function() {
		var sock = null
		let connect = document.getElementById("connect")
		let send = document.getElementById("send")
		let modelId = document.getElementById("modelId")
		let direction = document.getElementById("direction")

		function wsOnMsg(evt) {
			console.log("evt", evt)
		}

		function wsOnErr(evt) {
			console.log("error on ws", evt)
		}
		console.log("connec", connect)
		connect.onclick = function () {
			sock = new WebSocket("ws://127.0.0.1:8080")
			connect.value = "Connected"
			sock.onmessage = wsOnMsg
			sock.onerror = wsOnErr
			console.log("made ws")
		}

		send.onclick = function () {
			if (sock == null) {
				return
			}
			let cmd = {
				"ModelId": modelId.value,
				"Dir": direction.value
			}
			console.log("sent", cmd)
			sock.send(JSON.stringify(cmd))
		}
	}
	</script>

</head>
<body>
	<button id="connect">connec</button>
	<input type="text" id="modelId">
	<select id="direction">
		<option value="0">Down</option>
		<option value="1">Up</option>
		<option value="2">Left</option>
		<option value="3">Right</option>
	</select>
	<button id="send">send</button>

</body>
</html>
